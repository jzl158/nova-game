<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The N.O.V.A. Challenge - NFL √ó Crypto Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            color: #f0f0f0;
        }
        .card {
            background: linear-gradient(135deg, #1e293b, #334155);
            border: 2px solid #3b82f6;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            min-height: 240px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .card:hover {
            transform: translateY(-10px) rotate(1deg);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.3);
            border-color: #fbbf24;
        }
        .card-deck {
            perspective: 1000px;
            position: relative;
            height: 240px;
            width: 180px;
        }
        .card-deck .card {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .card-deck .card-back {
             transform: rotateY(0deg);
        }
        .card-deck.flipped .card-back {
            transform: rotateY(-180deg);
        }
        .card-deck.flipped .card-front {
            transform: rotateY(0deg);
        }
        .card-front {
             transform: rotateY(180deg);
        }
        .card-title {
            font-family: 'Playfair Display', serif;
        }
        .card-icon {
            font-size: 3rem;
            line-height: 1;
        }
        .playmat-zone {
            background: rgba(59, 130, 246, 0.1);
            border: 2px dashed #3b82f6;
            min-height: 280px;
            backdrop-filter: blur(10px);
        }
        .selected-card {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.4);
            border-color: #fbbf24;
        }
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            transition: all 0.3s;
            border: 1px solid #2563eb;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #2563eb, #1e40af);
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        }
        .modal {
            background-color: rgba(0,0,0,0.85);
            backdrop-filter: blur(5px);
        }
        
        /* NFL Theme Styling */
        .nfl-gradient {
            background: linear-gradient(135deg, #1a472a 0%, #16a34a 50%, #fbbf24 100%);
        }
        
        .crypto-gradient {
            background: linear-gradient(135deg, #7c3aed 0%, #3b82f6 50%, #fbbf24 100%);
        }
        
        /* Gamification Styles */
        .points-animation {
            animation: pointsFloat 2s ease-out forwards;
        }
        
        @keyframes pointsFloat {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-50px); }
        }
        
        .achievement-popup {
            animation: achievementBounce 0.5s ease-out;
        }
        
        @keyframes achievementBounce {
            0% { transform: scale(0.3) rotate(-15deg); opacity: 0; }
            50% { transform: scale(1.1) rotate(5deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        .streak-fire {
            animation: fireFlicker 1s infinite alternate;
        }
        
        @keyframes fireFlicker {
            0% { transform: scale(1) rotate(-2deg); }
            100% { transform: scale(1.1) rotate(2deg); }
        }
        
        .xp-bar {
            background: linear-gradient(90deg, #fbbf24, #f59e0b, #d97706);
            transition: width 0.8s ease-out;
        }
        
        .level-badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #1a1a1a;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.75rem;
            margin: 0.25rem;
        }
        
        .badge-bronze { background: linear-gradient(135deg, #cd7f32, #b8860b); }
        .badge-silver { background: linear-gradient(135deg, #c0c0c0, #a8a8a8); }
        .badge-gold { background: linear-gradient(135deg, #ffd700, #ffed4e); color: #1a1a1a; }
        .badge-platinum { background: linear-gradient(135deg, #e5e4e2, #fff); color: #1a1a1a; }
        
        .combo-multiplier {
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }
        
        .field-lines {
            background-image: 
                linear-gradient(90deg, rgba(59, 130, 246, 0.2) 1px, transparent 1px),
                linear-gradient(rgba(59, 130, 246, 0.2) 1px, transparent 1px);
            background-size: 40px 40px;
        }
    </style>
</head>
<body class="min-h-screen p-4 sm:p-8 field-lines">
    <div class="container mx-auto">

        <!-- Gamification Header -->
        <div class="bg-gradient-to-r from-slate-800 to-slate-700 rounded-lg p-4 mb-6 flex flex-wrap justify-between items-center border border-blue-500">
            <div class="flex items-center space-x-6">
                <div class="level-badge px-3 py-1 rounded-full font-bold">
                    Level <span id="player-level">1</span> GM
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-yellow-300 font-semibold">üí∞ <span id="total-points">0</span></span>
                    <span class="text-orange-400 font-semibold">üî• <span id="streak-count">0</span></span>
                </div>
                <div class="flex-1 max-w-xs">
                    <div class="bg-slate-600 rounded-full h-3 overflow-hidden">
                        <div id="xp-bar" class="xp-bar h-full rounded-full" style="width: 0%"></div>
                    </div>
                    <div class="text-xs text-gray-200 mt-1">
                        <span id="current-xp">0</span> / <span id="xp-needed">100</span> XP
                    </div>
                </div>
            </div>
            <div class="flex space-x-2 mt-2 sm:mt-0">
                <button id="achievements-btn" class="bg-purple-600 hover:bg-purple-700 px-3 py-1 rounded text-sm">üèÜ Hall of Fame</button>
                <button id="daily-challenge-btn" class="bg-orange-600 hover:bg-orange-700 px-3 py-1 rounded text-sm">‚≠ê Daily Play</button>
                <button id="leaderboard-btn" class="bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm">üìä League</button>
            </div>
        </div>

        <header class="text-center mb-12">
            <h1 class="text-4xl sm:text-6xl font-bold bg-gradient-to-r from-blue-400 via-yellow-400 to-green-400 bg-clip-text text-transparent tracking-wider" style="font-family: 'Playfair Display', serif;">
                The N.O.V.A. Challenge
            </h1>
            <p class="text-xl text-gray-200 mt-2">NFL √ó Crypto Edition</p>
            <p class="text-sm text-gray-400 mt-1">Nurture, Optimize, Visualize & Amplify the Future of Sports</p>
            <div id="combo-display" class="mt-2 text-center hidden">
                <span class="combo-multiplier bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-3 py-1 rounded-full text-sm font-bold">
                    üî• <span id="combo-count">0</span>x N.O.V.A. COMBO!
                </span>
            </div>
        </header>

        <!-- Playmat / Vision Board -->
        <div id="playmat" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
            <!-- Seed Zone -->
            <div class="playmat-zone rounded-lg p-6 flex flex-col items-center justify-center text-center">
                <h2 class="text-2xl font-bold mb-4 text-green-400 card-title">üå± SEED</h2>
                <p class="text-black mb-4">Pick your NFL crypto idea</p>
                <div id="seed-deck-container" class="card-deck mb-2" onclick="drawCard('seed')">
                    <div class="card card-back rounded-lg p-4 flex flex-col items-center justify-center text-center">
                        <div class="card-icon">üå±</div>
                        <h3 class="font-bold text-xl card-title">SEED</h3>
                        <p class="text-sm text-black">Click to draw</p>
                    </div>
                    <div id="seed-card" class="card card-front rounded-lg p-4 flex flex-col items-center justify-center text-center"></div>
                </div>
                <button id="refresh-seed" onclick="redrawCard('seed')" class="hidden btn-primary text-sm py-1 px-4 rounded-full mt-2">Refresh</button>
            </div>

            <!-- Nurture Zone -->
            <div class="playmat-zone rounded-lg p-6 flex flex-col items-center justify-center text-center">
                <h2 class="text-2xl font-bold mb-4 text-yellow-400 card-title">üåø NURTURE</h2>
                <p class="text-black mb-4">Grow the idea with context</p>
                <div id="nurture-deck-container" class="card-deck mb-2" onclick="drawCard('nurture')">
                     <div class="card card-back rounded-lg p-4 flex flex-col items-center justify-center text-center">
                        <div class="card-icon">üåø</div>
                        <h3 class="font-bold text-xl card-title">NURTURE</h3>
                        <p class="text-sm text-black">Click to draw</p>
                    </div>
                    <div id="nurture-card" class="card card-front rounded-lg p-4 flex flex-col items-center justify-center text-center"></div>
                </div>
                <button id="refresh-nurture" onclick="redrawCard('nurture')" class="hidden btn-primary text-sm py-1 px-4 rounded-full mt-2">Refresh</button>
            </div>

            <!-- Optimize Zone -->
            <div class="playmat-zone rounded-lg p-6 flex flex-col items-center justify-center text-center">
                <h2 class="text-2xl font-bold mb-4 text-blue-400 card-title">‚ö° OPTIMIZE</h2>
                <p class="text-black mb-4">Sharpen for impact</p>
                <div id="optimize-deck-container" class="card-deck mb-2" onclick="drawCard('optimize')">
                     <div class="card card-back rounded-lg p-4 flex flex-col items-center justify-center text-center">
                        <div class="card-icon">‚ö°</div>
                        <h3 class="font-bold text-xl card-title">OPTIMIZE</h3>
                        <p class="text-sm text-black">Click to draw</p>
                    </div>
                    <div id="optimize-card" class="card card-front rounded-lg p-4 flex flex-col items-center justify-center text-center"></div>
                </div>
                <button id="refresh-optimize" onclick="redrawCard('optimize')" class="hidden btn-primary text-sm py-1 px-4 rounded-full mt-2">Refresh</button>
            </div>

            <!-- Visualize Zone -->
            <div class="playmat-zone rounded-lg p-6 flex flex-col items-center justify-center text-center">
                <h2 class="text-2xl font-bold mb-4 text-purple-400 card-title">üé® VISUALIZE</h2>
                <p class="text-black mb-4">Make it tangible</p>
                <div id="visualize-deck-container" class="card-deck mb-2" onclick="drawCard('visualize')">
                     <div class="card card-back rounded-lg p-4 flex flex-col items-center justify-center text-center">
                        <div class="card-icon">üé®</div>
                        <h3 class="font-bold text-xl card-title">VISUALIZE</h3>
                        <p class="text-sm text-black">Click to draw</p>
                    </div>
                    <div id="visualize-card" class="card card-front rounded-lg p-4 flex flex-col items-center justify-center text-center"></div>
                </div>
                <button id="refresh-visualize" onclick="redrawCard('visualize')" class="hidden btn-primary text-sm py-1 px-4 rounded-full mt-2">Refresh</button>
            </div>
        </div>

        <!-- Amplify Zone -->
        <div id="amplify-zone" class="bg-gradient-to-r from-slate-800 to-slate-700 rounded-lg p-8 text-center hidden border border-red-400">
            <h2 class="text-3xl font-bold mb-4 text-red-400 card-title">üì¢ AMPLIFY ZONE</h2>
            <p class="text-white mb-6">How can all this happen? Synthesize the cards and share your vision.</p>
            <textarea id="vision-input" class="w-full h-40 bg-slate-900 text-white p-4 rounded-lg border border-blue-500 focus:outline-none focus:ring-2 focus:ring-red-400" placeholder="Type your answer here..."></textarea>
            <button id="submit-vision" class="btn-primary font-bold py-3 px-8 rounded-full mt-6">Submit Vision</button>
        </div>

    </div>

    <!-- Points Animation Overlay -->
    <div id="points-overlay" class="fixed inset-0 pointer-events-none z-50"></div>

    <!-- Achievement Popup -->
    <div id="achievement-popup" class="fixed top-20 right-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-black p-4 rounded-lg shadow-lg hidden z-50">
        <div class="flex items-center space-x-2">
            <span class="text-2xl">üèÜ</span>
            <div>
                <div class="font-bold" id="achievement-title">Hall of Fame!</div>
                <div class="text-sm" id="achievement-description"></div>
            </div>
        </div>
    </div>

    <!-- Daily Challenge Modal -->
    <div id="daily-challenge-modal" class="modal fixed inset-0 z-50 hidden items-center justify-center p-4">
        <div class="bg-slate-800 rounded-lg shadow-2xl p-8 max-w-md w-full text-center border border-orange-400">
            <h2 class="text-3xl font-bold mb-4 text-orange-400 card-title">‚≠ê Daily Playbook</h2>
            <div id="daily-challenge-content">
                <p class="text-white mb-4">Today's challenge: Create a concept that...</p>
                <p id="daily-challenge-text" class="text-blue-300 font-semibold mb-4 text-lg"></p>
                <p class="text-sm text-gray-400 mb-6">Complete for <span class="text-yellow-400 font-bold">+250 XP</span> bonus!</p>
            </div>
            <button id="close-daily-challenge" class="btn-primary font-bold py-2 px-6 rounded-full">Let's Play!</button>
        </div>
    </div>

    <!-- Hall of Fame Modal -->
    <div id="achievements-modal" class="modal fixed inset-0 z-50 hidden items-center justify-center p-4">
        <div class="bg-slate-800 rounded-lg shadow-2xl p-8 max-w-2xl w-full border border-purple-400">
            <h2 class="text-3xl font-bold mb-6 text-purple-400 card-title text-center">üèÜ Hall of Fame</h2>
            <div id="achievements-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto"></div>
            <button id="close-achievements" class="btn-primary font-bold py-2 px-6 rounded-full mt-6 w-full">Back to Game</button>
        </div>
    </div>

    <!-- League Leaderboard Modal -->
    <div id="leaderboard-modal" class="modal fixed inset-0 z-50 hidden items-center justify-center p-4">
        <div class="bg-slate-800 rounded-lg shadow-2xl p-8 max-w-md w-full border border-green-400">
            <h2 class="text-3xl font-bold mb-6 text-green-400 card-title text-center">üìä League Standings</h2>
            <div id="leaderboard-content" class="space-y-3 max-h-96 overflow-y-auto"></div>
            <button id="close-leaderboard" class="btn-primary font-bold py-2 px-6 rounded-full mt-6 w-full">Back to Game</button>
        </div>
    </div>

    <!-- Championship Result Modal -->
    <div id="result-modal" class="modal fixed inset-0 z-50 hidden items-center justify-center p-4">
        <div class="bg-slate-800 rounded-lg shadow-2xl p-8 max-w-2xl w-full text-center border border-yellow-400">
             <h2 class="text-3xl font-bold mb-4 text-yellow-400 card-title">üèÜ VISION AMPLIFIED! üèÜ</h2>
             <div id="completion-reward" class="mb-4 text-center">
                <span class="text-2xl text-yellow-400">+<span id="reward-points">0</span> Coins!</span>
                <span class="text-lg text-blue-400 ml-4">+<span id="reward-xp">0</span> XP!</span>
             </div>
             <p class="text-white mb-6">You've successfully created an innovative NFL √ó Crypto vision! Here's your N.O.V.A. combination:</p>
             <div id="modal-content" class="text-left bg-slate-900 p-6 rounded-lg mb-6 border border-gray-600">
                <p><strong class="text-green-400">üå± Seed:</strong> <span id="modal-seed"></span></p>
                <p><strong class="text-yellow-400">üåø Nurture:</strong> <span id="modal-nurture"></span></p>
                <p><strong class="text-blue-400">‚ö° Optimize:</strong> <span id="modal-optimize"></span></p>
                <p><strong class="text-purple-400">üé® Visualize:</strong> <span id="modal-visualize"></span></p>
                <hr class="my-4 border-gray-600">
                <p><strong class="text-red-400">üì¢ Amplify:</strong> <span id="modal-vision" class="block mt-2 text-gray-200"></span></p>
             </div>
             <button id="restart-game" class="btn-primary font-bold py-3 px-8 rounded-full">üîÑ Next Season</button>
        </div>
    </div>

    <!-- Alert Modal -->
    <div id="alert-modal" class="modal fixed inset-0 z-50 hidden items-center justify-center p-4">
        <div class="bg-slate-800 rounded-lg shadow-2xl p-8 max-w-sm w-full text-center border border-yellow-400">
             <h2 id="alert-title" class="text-2xl font-bold mb-4 text-yellow-400 card-title">Timeout!</h2>
             <p id="alert-message" class="text-white mb-6"></p>
             <button id="alert-ok" class="btn-primary font-bold py-2 px-6 rounded-full">Resume Game</button>
        </div>
    </div>

    <script>
        const decks = {
            seed: [
                "Russell Okung's Bitcoin salary revolution", "Odell Beckham Jr.'s all-crypto contract", "Aaron Rodgers' Bitcoin advocacy", "Saquon Barkley's fan token leadership",
                "Tom Brady's NFT empire", "Patrick Mahomes' blockchain innovation", "Trevor Lawrence's crypto-native approach", "Dak Prescott's DeFi exploration",
                "Josh Allen's Bitcoin bull run", "Lamar Jackson's gaming tokenization", "Kyler Murray's metaverse QB experience", "Justin Herbert's Web3 rookie approach",
                "Cooper Kupp's NFT collection", "Davante Adams' blockchain receiving", "Tyreek Hill's Lightning Network speed", "Stefon Diggs' crypto influence",
                "Derrick Henry's mining metaphor", "Jonathan Taylor's crypto rush", "Christian McCaffrey's versatile crypto", "Aaron Donald's defensive crypto",
                "Crypto fantasy football league", "NFT trading card platform", "Blockchain ticket marketplace", "Fan token voting system",
                "Crypto sports betting pool", "Digital collectible exchange", "Tokenized season tickets", "Blockchain sports media",
                "Crypto player insurance fund", "NFT highlight ownership", "Tokenized coaching sessions", "Crypto draft combine",
                "Blockchain Hall of Fame", "Crypto sports education", "NFT championship rings", "Tokenized training facilities",
                "Crypto sports journalism", "Digital memorabilia vault", "Blockchain fan rewards", "Crypto tailgate experiences",
                "Token-gated meet & greets", "Crypto podcast network", "NFT art collaborations", "Blockchain social network",
                "Crypto investment pools", "Digital Hall of Fame voting", "Tokenized retired jerseys", "Crypto workout tracking"
            ],
            nurture: [
                "Add why Bitcoin matters to athletes", "Connect to Russell Okung's pioneering story", "Show how crypto creates financial freedom", "Tie to generational wealth building",
                "Link to global economic inflation", "Add a personal financial journey", "Connect to athlete empowerment", "Show fan ownership benefits",
                "Add community investment angle", "Tie to social justice movements", "Connect to youth financial education", "Add retirement security story",
                "Link to family legacy building", "Show economic independence", "Add charitable giving structure", "Tie to local community impact",
                "Connect to educational initiatives", "Add mentorship opportunities", "Show technology adoption curve", "Link to cultural influence",
                "Add sustainability benefits", "Connect to next generation", "Show transparency in contracts", "Add fan engagement revolution",
                "Link to media rights evolution", "Show data ownership benefits", "Add global accessibility", "Connect to innovation leadership",
                "Tie to decentralized future", "Add cross-platform benefits", "Show reduced intermediaries", "Link to direct fan relationships",
                "Add programmable money benefits", "Connect to instant settlements", "Show reduced transaction costs", "Add 24/7 market access",
                "Link to portfolio diversification", "Show inflation hedge properties", "Add digital scarcity value", "Connect to network effects",
                "Tie to early adopter advantages", "Add technological sovereignty", "Show censorship resistance", "Link to borderless payments",
                "Add smart contract automation", "Connect to trustless systems", "Show immutable records", "Add peer-to-peer benefits"
            ],
            optimize: [
                "Add AI-powered trading bots", "Use blockchain verification", "Implement smart contracts", "Add DeFi yield farming",
                "Use Layer 2 scaling solutions", "Add cross-chain bridges", "Implement token staking", "Use NFT marketplaces",
                "Add prediction markets", "Use DAO governance", "Implement Lightning Network", "Add privacy coins",
                "Use algorithmic stablecoins", "Add liquidity mining", "Implement flash loans", "Use automated market makers",
                "Add perpetual contracts", "Use oracle price feeds", "Implement meta-transactions", "Add gas optimization",
                "Use batched transactions", "Add multi-signature wallets", "Implement time-locked contracts", "Use decentralized identity",
                "Add zero-knowledge proofs", "Use rollup technology", "Implement sharding", "Add sidechains",
                "Use state channels", "Add plasma chains", "Implement proof-of-stake", "Use validator networks",
                "Add slashing conditions", "Use reward mechanisms", "Implement governance tokens", "Add voting mechanisms",
                "Use quadratic voting", "Add delegation systems", "Implement reputation scoring", "Use credit scoring",
                "Add insurance protocols", "Use risk assessment", "Implement hedging strategies", "Add arbitrage opportunities",
                "Use market making", "Add liquidity provision", "Implement yield strategies", "Use composability features"
            ],
            visualize: [
                "Write a 5-word slogan", "Design the mobile app", "Create a pitch deck", "Write the press release",
                "Design the website homepage", "Create a TikTok challenge", "Write an elevator pitch", "Design the logo",
                "Create a commercial script", "Write a Twitter thread", "Design the user interface", "Create a demo video",
                "Write a product haiku", "Design merchandise", "Create a meme campaign", "Write a testimonial",
                "Design the onboarding flow", "Create a tutorial series", "Write a manifesto", "Design partnership materials",
                "Create a roadmap visual", "Write a FAQ section", "Design the analytics dashboard", "Create a case study",
                "Write a whitepaper summary", "Design the token economics", "Create a community guide", "Write a launch strategy",
                "Design the governance structure", "Create a rewards program", "Write a compliance guide", "Design the security model",
                "Create a marketing campaign", "Write a user story", "Design the API documentation", "Create a developer toolkit",
                "Write a competitive analysis", "Design the integration guide", "Create a success metrics dashboard", "Write a growth strategy",
                "Design the customer journey", "Create a feedback system", "Write a monetization plan", "Design the scalability framework",
                "Create a partnership proposal", "Write a regulatory assessment", "Design the risk management plan", "Create a future vision document"
            ]
        };

        const icons = {
            seed: 'üå±',
            nurture: 'üåø',
            optimize: '‚ö°',
            visualize: 'üé®'
        };

        const colors = {
            seed: 'green',
            nurture: 'yellow',
            optimize: 'blue',
            visualize: 'purple'
        };

        // Gamification State
        let gameState = {
            totalPoints: 0,
            currentXP: 0,
            level: 1,
            streak: 0,
            gamesCompleted: 0,
            achievements: new Set(),
            lastPlayDate: null,
            comboMultiplier: 1,
            cardsDrawnToday: 0,
            dailyChallenge: null,
            leaderboard: []
        };

        // NFL√óCrypto Themed Achievements
        const achievementsList = [
            { id: 'first_game', title: 'Rookie Season', description: 'Complete your first championship challenge', xp: 50, icon: 'üèà' },
            { id: 'streak_3', title: 'Three-Peat', description: 'Win 3 championships in a row', xp: 150, icon: 'üî•' },
            { id: 'streak_7', title: 'Dynasty Builder', description: 'Win 7 championships in a row', xp: 300, icon: 'üëë' },
            { id: 'level_5', title: 'Pro Bowl GM', description: 'Reach GM Level 5', xp: 200, icon: '‚≠ê' },
            { id: 'level_10', title: 'Hall of Fame GM', description: 'Reach GM Level 10', xp: 500, icon: 'üèÜ' },
            { id: 'cards_100', title: 'Draft Master', description: 'Draft 100 cards total', xp: 100, icon: 'üÉè' },
            { id: 'daily_champion', title: 'Daily Champion', description: 'Complete a daily playbook challenge', xp: 250, icon: 'üìÖ' },
            { id: 'speed_demon', title: 'Two-Minute Drill', description: 'Win a championship in under 2 minutes', xp: 200, icon: 'üí®' },
            { id: 'wordsmith', title: 'Sports Journalist', description: 'Write a vision with over 250 characters', xp: 150, icon: '‚úçÔ∏è' },
            { id: 'perfect_combo', title: 'Perfect Season', description: 'Draft all 4 cards without trades', xp: 400, icon: 'üíé' },
            { id: 'crypto_pioneer', title: 'Satoshi Nakamoto Award', description: 'Create 10 Bitcoin-focused concepts', xp: 300, icon: '‚Çø' },
            { id: 'nft_collector', title: 'Digital Memorabilia King', description: 'Feature NFTs in 5 different concepts', xp: 200, icon: 'üñºÔ∏è' }
        ];

        // NFL√óCrypto Daily Challenges
        const dailyChallenges = [
            "Revolutionizes how NFL players receive their salaries using Bitcoin",
            "Creates a new fan engagement model through tokenized experiences",
            "Integrates blockchain technology into game day operations",
            "Develops innovative NFT collectibles for superfans",
            "Builds a DeFi protocol specifically for professional athletes",
            "Combines fantasy sports with cryptocurrency rewards",
            "Creates a metaverse experience for NFL fans",
            "Develops smart contracts for player performance incentives",
            "Integrates crypto mining with stadium operations",
            "Creates a DAO for fan-owned team decisions"
        ];

        let drawnCards = {
            seed: null,
            nurture: null,
            optimize: null,
            visualize: null
        };
         
        let remainingDecks = {...decks};
        let gameStartTime = null;
        let refreshCount = 0;
        let bitcoinConceptCount = 0;
        let nftConceptCount = 0;

        // Initialize game state from localStorage
        function initializeGameState() {
            const saved = localStorage.getItem('gridiron-crypto-state');
            if (saved) {
                const savedState = JSON.parse(saved);
                gameState = { ...gameState, ...savedState };
                gameState.achievements = new Set(savedState.achievements || []);
                bitcoinConceptCount = savedState.bitcoinConceptCount || 0;
                nftConceptCount = savedState.nftConceptCount || 0;
            }
            
            generateDailyChallenge();
            updateUI();
        }

        function saveGameState() {
            const stateToSave = {
                ...gameState,
                achievements: Array.from(gameState.achievements),
                bitcoinConceptCount,
                nftConceptCount
            };
            localStorage.setItem('gridiron-crypto-state', JSON.stringify(stateToSave));
        }

        function updateUI() {
            document.getElementById('total-points').textContent = gameState.totalPoints;
            document.getElementById('player-level').textContent = gameState.level;
            document.getElementById('streak-count').textContent = gameState.streak;
            
            const xpForNextLevel = getXPForLevel(gameState.level + 1);
            const xpForCurrentLevel = getXPForLevel(gameState.level);
            const xpNeeded = xpForNextLevel - xpForCurrentLevel;
            const currentLevelXP = gameState.currentXP - xpForCurrentLevel;
            const xpPercent = (currentLevelXP / xpNeeded) * 100;
            
            document.getElementById('xp-bar').style.width = `${xpPercent}%`;
            document.getElementById('current-xp').textContent = currentLevelXP;
            document.getElementById('xp-needed').textContent = xpNeeded;
            
            const streakElement = document.getElementById('streak-count');
            if (gameState.streak >= 3) {
                streakElement.classList.add('streak-fire');
            } else {
                streakElement.classList.remove('streak-fire');
            }
            
            if (gameState.comboMultiplier > 1) {
                document.getElementById('combo-count').textContent = gameState.comboMultiplier;
                document.getElementById('combo-display').classList.remove('hidden');
            } else {
                document.getElementById('combo-display').classList.add('hidden');
            }
        }

        function getXPForLevel(level) {
            return Math.floor(150 * Math.pow(1.6, level - 1));
        }

        function addXP(amount) {
            gameState.currentXP += amount;
            
            const xpForNextLevel = getXPForLevel(gameState.level + 1);
            if (gameState.currentXP >= xpForNextLevel) {
                levelUp();
            }
            
            updateUI();
            saveGameState();
        }

        function levelUp() {
            gameState.level++;
            showPointsAnimation(`GM LEVEL ${gameState.level}!`, 'level-up');
            
            if (gameState.level === 5) unlockAchievement('level_5');
            if (gameState.level === 10) unlockAchievement('level_10');
        }

        function addPoints(amount, element = null) {
            gameState.totalPoints += amount * gameState.comboMultiplier;
            
            if (element) {
                showPointsAnimation(`+${amount * gameState.comboMultiplier}`, 'points', element);
            }
            
            updateUI();
            saveGameState();
        }

        function showPointsAnimation(text, type = 'points', sourceElement = null) {
            const overlay = document.getElementById('points-overlay');
            const animation = document.createElement('div');
            
            animation.className = `points-animation fixed text-2xl font-bold z-50 pointer-events-none`;
            animation.textContent = text;
            
            if (type === 'level-up') {
                animation.className += ' text-yellow-400 text-4xl';
                animation.style.left = '50%';
                animation.style.top = '30%';
                animation.style.transform = 'translateX(-50%)';
            } else {
                animation.className += ' text-yellow-300';
                if (sourceElement) {
                    const rect = sourceElement.getBoundingClientRect();
                    animation.style.left = `${rect.left + rect.width / 2}px`;
                    animation.style.top = `${rect.top}px`;
                    animation.style.transform = 'translateX(-50%)';
                } else {
                    animation.style.right = '20px';
                    animation.style.top = '100px';
                }
            }
            
            overlay.appendChild(animation);
            
            setTimeout(() => {
                overlay.removeChild(animation);
            }, 2000);
        }

        function unlockAchievement(achievementId) {
            if (gameState.achievements.has(achievementId)) return;
            
            const achievement = achievementsList.find(a => a.id === achievementId);
            if (!achievement) return;
            
            gameState.achievements.add(achievementId);
            addXP(achievement.xp);
            
            const popup = document.getElementById('achievement-popup');
            document.getElementById('achievement-title').textContent = achievement.title;
            document.getElementById('achievement-description').textContent = achievement.description;
            
            popup.classList.remove('hidden');
            popup.classList.add('achievement-popup');
            
            setTimeout(() => {
                popup.classList.add('hidden');
                popup.classList.remove('achievement-popup');
            }, 4000);
            
            saveGameState();
        }

        function generateDailyChallenge() {
            const today = new Date().toDateString();
            if (gameState.dailyChallenge?.date !== today) {
                const challengeIndex = new Date().getDate() % dailyChallenges.length;
                gameState.dailyChallenge = {
                    date: today,
                    text: dailyChallenges[challengeIndex],
                    completed: false
                };
                saveGameState();
            }
        }

        function checkDailyChallenge(visionText) {
            if (!gameState.dailyChallenge || gameState.dailyChallenge.completed) return false;
            
            const challengeKeywords = gameState.dailyChallenge.text.toLowerCase().split(' ');
            const visionLower = visionText.toLowerCase();
            
            const matches = challengeKeywords.filter(keyword => 
                keyword.length > 3 && visionLower.includes(keyword)
            );
            
            if (matches.length >= 2) {
                gameState.dailyChallenge.completed = true;
                unlockAchievement('daily_champion');
                addXP(250);
                showPointsAnimation('Daily Challenge Complete! +250 XP', 'level-up');
                return true;
            }
            
            return false;
        }

        function drawCard(deckName) {
            if (drawnCards[deckName]) return;

            if (!gameStartTime) {
                gameStartTime = Date.now();
                refreshCount = 0;
            }

            if (remainingDecks[deckName] && remainingDecks[deckName].length > 0) {
                const cardIndex = Math.floor(Math.random() * remainingDecks[deckName].length);
                const cardText = remainingDecks[deckName][cardIndex];
                
                remainingDecks[deckName].splice(cardIndex, 1);

                drawnCards[deckName] = cardText;
                const cardElement = document.getElementById(`${deckName}-card`);
                
                cardElement.innerHTML = `
                    <div class="card-icon">${icons[deckName]}</div>
                    <p class="font-semibold text-lg text-center">${cardText}</p>
                `;
                
                const deckContainer = document.getElementById(`${deckName}-deck-container`);
                deckContainer.classList.add('flipped');
                
                document.getElementById(`refresh-${deckName}`).classList.remove('hidden');

                const basePoints = 30;
                const baseXP = 25;
                
                addPoints(basePoints, deckContainer);
                addXP(baseXP);
                
                const cardsDrawn = Object.values(drawnCards).filter(card => card !== null).length;
                gameState.comboMultiplier = cardsDrawn;
                updateUI();
                
                gameState.cardsDrawnToday++;
                if (gameState.cardsDrawnToday >= 100) {
                    unlockAchievement('cards_100');
                }

                if (Object.values(drawnCards).every(card => card !== null)) {
                    document.getElementById('amplify-zone').classList.remove('hidden');
                    
                    if (refreshCount === 0) {
                        unlockAchievement('perfect_combo');
                    }
                }
            }
        }

        function redrawCard(deckName) {
            const currentCardText = drawnCards[deckName];
            refreshCount++;

            if (currentCardText) {
                remainingDecks[deckName].push(currentCardText);
                drawnCards[deckName] = null;

                const deckContainer = document.getElementById(`${deckName}-deck-container`);
                deckContainer.classList.remove('flipped');
                
                document.getElementById(`refresh-${deckName}`).classList.add('hidden');
                document.getElementById('amplify-zone').classList.add('hidden');

                const cardsDrawn = Object.values(drawnCards).filter(card => card !== null).length;
                gameState.comboMultiplier = Math.max(1, cardsDrawn);
                updateUI();

                setTimeout(() => {
                    const cardElement = document.getElementById(`${deckName}-card`);
                    cardElement.innerHTML = '';
                }, 300);
            }
        }

        function showAlert(message, title = 'Timeout!') {
            document.getElementById('alert-title').textContent = title;
            document.getElementById('alert-message').textContent = message;
            document.getElementById('alert-modal').style.display = 'flex';
        }
         
        document.getElementById('alert-ok').addEventListener('click', () => {
            document.getElementById('alert-modal').style.display = 'none';
        });

        document.getElementById('submit-vision').addEventListener('click', () => {
            const visionText = document.getElementById('vision-input').value;
            if (visionText.trim() === '') {
                showAlert('Please describe your championship vision before submitting!');
                return;
            }

            const gameTime = Date.now() - gameStartTime;
            const completionBonus = Math.max(150, 600 - Math.floor(gameTime / 1000) * 8);
            const visionBonus = Math.floor(visionText.length / 8) * 6;
            const streakBonus = gameState.streak * 75;
            
            const totalPoints = completionBonus + visionBonus + streakBonus;
            const totalXP = 150 + (visionText.length > 250 ? 75 : 0);

            // Track concept themes
            const visionLower = visionText.toLowerCase();
            if (visionLower.includes('bitcoin') || visionLower.includes('btc')) {
                bitcoinConceptCount++;
                if (bitcoinConceptCount >= 10) unlockAchievement('crypto_pioneer');
            }
            if (visionLower.includes('nft') || visionLower.includes('collectible') || visionLower.includes('digital art')) {
                nftConceptCount++;
                if (nftConceptCount >= 5) unlockAchievement('nft_collector');
            }

            const today = new Date().toDateString();
            if (gameState.lastPlayDate === today) {
                // Same day, no streak change
            } else {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                if (gameState.lastPlayDate === yesterday.toDateString()) {
                    gameState.streak++;
                } else {
                    gameState.streak = 1;
                }
            }
            gameState.lastPlayDate = today;
            gameState.gamesCompleted++;

            if (gameState.gamesCompleted === 1) unlockAchievement('first_game');
            if (gameState.streak === 3) unlockAchievement('streak_3');
            if (gameState.streak === 7) unlockAchievement('streak_7');
            if (gameTime < 120000) unlockAchievement('speed_demon');
            if (visionText.length > 250) unlockAchievement('wordsmith');

            checkDailyChallenge(visionText);

            addPoints(totalPoints);
            addXP(totalXP);

            document.getElementById('reward-points').textContent = totalPoints;
            document.getElementById('reward-xp').textContent = totalXP;

            document.getElementById('modal-seed').textContent = drawnCards.seed;
            document.getElementById('modal-nurture').textContent = drawnCards.nurture;
            document.getElementById('modal-optimize').textContent = drawnCards.optimize;
            document.getElementById('modal-visualize').textContent = drawnCards.visualize;
            document.getElementById('modal-vision').textContent = visionText;

            document.getElementById('result-modal').style.display = 'flex';

            saveGameState();
        });

        document.getElementById('restart-game').addEventListener('click', () => {
            drawnCards = { seed: null, nurture: null, optimize: null, visualize: null };
            remainingDecks = JSON.parse(JSON.stringify(decks));

            document.getElementById('result-modal').style.display = 'hidden';
            ['seed', 'nurture', 'optimize', 'visualize'].forEach(deckName => {
                const deckContainer = document.getElementById(`${deckName}-deck-container`);
                deckContainer.classList.remove('flipped');
                const cardElement = document.getElementById(`${deckName}-card`);
                cardElement.innerHTML = '';
                document.getElementById(`refresh-${deckName}`).classList.add('hidden');
            });

            document.getElementById('amplify-zone').classList.add('hidden');
            document.getElementById('vision-input').value = '';
            document.getElementById('result-modal').style.display = 'none';
            
            gameStartTime = null;
            gameState.comboMultiplier = 1;
            updateUI();
        });

        // Modal handlers
        document.getElementById('achievements-btn').addEventListener('click', () => {
            showAchievements();
        });

        document.getElementById('daily-challenge-btn').addEventListener('click', () => {
            showDailyChallenge();
        });

        document.getElementById('leaderboard-btn').addEventListener('click', () => {
            showLeaderboard();
        });

        document.getElementById('close-achievements').addEventListener('click', () => {
            document.getElementById('achievements-modal').style.display = 'none';
        });

        document.getElementById('close-daily-challenge').addEventListener('click', () => {
            document.getElementById('daily-challenge-modal').style.display = 'none';
        });

        document.getElementById('close-leaderboard').addEventListener('click', () => {
            document.getElementById('leaderboard-modal').style.display = 'none';
        });

        function showAchievements() {
            const grid = document.getElementById('achievements-grid');
            grid.innerHTML = '';
            
            achievementsList.forEach(achievement => {
                const unlocked = gameState.achievements.has(achievement.id);
                const div = document.createElement('div');
                div.className = `p-4 rounded-lg ${unlocked ? 'bg-slate-700 border border-yellow-400' : 'bg-slate-900'} text-center`;
                div.innerHTML = `
                    <div class="text-3xl mb-2 ${unlocked ? '' : 'grayscale opacity-50'}">${achievement.icon}</div>
                    <div class="font-bold text-sm ${unlocked ? 'text-yellow-400' : 'text-gray-500'}">${achievement.title}</div>
                    <div class="text-xs text-gray-400 mt-1">${achievement.description}</div>
                    <div class="text-xs text-blue-400 mt-1">+${achievement.xp} XP</div>
                    ${unlocked ? '<div class="badge badge-gold mt-2">UNLOCKED</div>' : ''}
                `;
                grid.appendChild(div);
            });
            
            document.getElementById('achievements-modal').style.display = 'flex';
        }

        function showDailyChallenge() {
            document.getElementById('daily-challenge-text').textContent = gameState.dailyChallenge.text;
            document.getElementById('daily-challenge-modal').style.display = 'flex';
        }

        function showLeaderboard() {
            const mockLeaderboard = [
                { name: 'You', points: gameState.totalPoints, level: gameState.level },
                { name: 'CryptoPat15', points: Math.max(0, gameState.totalPoints - 200), level: Math.max(1, gameState.level - 1) },
                { name: 'BitcoinBrady12', points: Math.max(0, gameState.totalPoints - 400), level: Math.max(1, gameState.level - 2) },
                { name: 'NFTRodgers12', points: Math.max(0, gameState.totalPoints - 600), level: Math.max(1, gameState.level - 2) },
                { name: 'DeFiDak4', points: Math.max(0, gameState.totalPoints - 800), level: Math.max(1, gameState.level - 3) }
            ].sort((a, b) => b.points - a.points);

            const content = document.getElementById('leaderboard-content');
            content.innerHTML = '';
            
            mockLeaderboard.forEach((player, index) => {
                const div = document.createElement('div');
                div.className = `flex justify-between items-center p-3 rounded ${player.name === 'You' ? 'bg-blue-900 border border-blue-400' : 'bg-slate-700'}`;
                div.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <span class="text-2xl">${index === 0 ? 'üèÜ' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ'}</span>
                        <div>
                            <div class="font-bold ${player.name === 'You' ? 'text-blue-400' : ''}">${player.name}</div>
                            <div class="text-xs text-gray-400">Level ${player.level} GM</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-yellow-400">${player.points}</div>
                        <div class="text-xs text-gray-400">coins</div>
                    </div>
                `;
                content.appendChild(div);
            });
            
            document.getElementById('leaderboard-modal').style.display = 'flex';
        }

        initializeGameState();

    </script>
</body>
</html>